<!DOCTYPE html>
<html lang="en" prefix="og: https://ogp.me/ns#" data-bs-theme="dark">
  <head>
    <meta charset="utf-8" />
    <title>chat.vote</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="Create twitch chat polls and vote through chat commands easily and quickly using chat.vote" />
    <meta name="keywords" content="twitch, chat, poll, chatvote, chat.vote" />
    <meta property="og:title" content="chat.vote" />
    <meta property="og:site_name" content="chat.vote" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://chat.vote" />
    <meta property="og:image" content="https://chat.vote/pics/ogimage.png" />
    <meta property="og:locale" content="en_US" />
    <meta property="og:description" content="Create twitch chat polls and vote through chat commands easily and quickly using chat.vote" />

    <link rel="apple-touch-icon" sizes="152x152" href="/pics/icon/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/pics/icon/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/pics/icon/favicon-16x16.png" />
    <link rel="manifest" href="/pics/icon/site.webmanifest" />
    <link rel="mask-icon" href="/pics/icon/safari-pinned-tab.svg" color="#ffd100" />
    <link rel="shortcut icon" href="/pics/icon/favicon.ico" />
    <meta name="msapplication-TileColor" content="#2b5797" />
    <meta name="msapplication-config" content="/pics/icon/browserconfig.xml" />
    <meta name="theme-color" content="#ffffff" />

    <link rel="stylesheet" href="/css/bootstrap.min.css" />
    <link rel="stylesheet" href="/css/datatables.min.css" />
    <link rel="stylesheet" href="/css/icons.css" />
    <link rel="stylesheet" href="/css/common.min.css" />
    <link rel="stylesheet" href="/css/chatvote.min.css" />
  </head>

  <body>
    <noscript><div class="alert alert-danger" role="alert">WARNING! JavaScript is disabled. This site will not work properly without it.</div></noscript>

    <div class="modal" id="deleteAllModal" tabindex="-1" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Are you sure?</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <p>All options and vote results will be deleted</p>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
            <button type="button" class="btn btn-danger" data-bs-dismiss="modal" onclick="resetPoll()">Delete and reset</button>
          </div>
        </div>
      </div>
    </div>

    <div class="modal" id="randomOptionModal" tabindex="-1" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Random winner</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <p id="randomOptionWinner"></p>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" onclick="pickRandomOption()"><i class="material-icons notranslate">refresh</i>reroll</button>
            <button type="button" class="btn btn-primary" data-bs-dismiss="modal">OK</button>
          </div>
        </div>
      </div>
    </div>

    <div class="modal" id="resetSettingsModal" tabindex="-1" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Are you sure?</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <p>All settings will be reset and the page will reload</p>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
            <button type="button" class="btn btn-danger" data-bs-dismiss="modal" onclick="resetSettings()">Reset</button>
          </div>
        </div>
      </div>
    </div>

    <div class="modal" id="timeOverModal" tabindex="-1" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Time is up</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <p id="timeOverWinner"></p>
          </div>
          <div class="modal-footer">
            <button type="button" onclick="removeWinner()" class="btn btn-info">Remove winner and restart</button>
            <button type="button" class="btn btn-primary" data-bs-dismiss="modal">OK</button>
          </div>
        </div>
      </div>
    </div>

    <div class="modal" id="yesnoTimeOverModal" tabindex="-1" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Time is up</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <p id="yesnoTimeOverWinner"></p>
          </div>
          <div class="modal-footer">
            <button type="button" id="restartYesno" class="btn btn-info">Restart</button>
            <button type="button" class="btn btn-primary" data-bs-dismiss="modal">OK</button>
          </div>
        </div>
      </div>
    </div>

    <div class="modal" id="loginExpiredModal" tabindex="-1" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Login expired</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <div class="row justify-content-center">
              Renew login:<br />
              <button type="button" data-bs-dismiss="modal" onclick="login()" class="btn btn-twitch"><span class="twitch-icon"></span>Sign in with Twitch</button>
              <br /><small class="text-body-secondary">Logins expire after 2 months.<br />Or after you change your password.</small>
            </div>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-danger"
              data-bs-toggle="tooltip"
              data-bs-delay="200"
              data-bs-placement="top"
              data-bs-title="Will reset everything so you can login again."
              data-bs-dismiss="modal"
              onclick="resetSettings(true)"
            >
              Reset
            </button>
          </div>
        </div>
      </div>
    </div>

    <div class="modal" id="tieModal" tabindex="-1" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Can't pick a winner</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <p>Winner and runner up are tied, unable to pick a winner</p>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">OK</button>
          </div>
        </div>
      </div>
    </div>

    <div class="modal" id="randomYesnoModal" tabindex="-1" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Random winner</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <div id="coin" onclick="pickRandomYesNo()">
              <div class="side-a"><img src="/pics/yea.webp" alt="yea" width="150" height="150" /></div>
              <div class="side-b"><img src="/pics/nay.webp" alt="nay" width="150" height="150" /></div>
            </div>
          </div>

          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" onclick="pickRandomYesNo()"><i class="material-icons notranslate">refresh</i>reroll</button>
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">OK</button>
          </div>
        </div>
      </div>
    </div>

    <nav class="navbar navbar-expand-lg bg-body-tertiary mb-2">
      <div class="container-fluid">
        <a
          class="navbar-brand notranslate site-link"
          href="/home/"
          target="_self"
          rel="noopener noreferrer"
          data-bs-toggle="tooltip"
          data-bs-delay="200"
          data-bs-placement="bottom"
          data-bs-title="Home page"
        >
          <img src="/pics/donk.png" alt="logo" style="height: 24px; width: 24px" class="d-inline-block align-top" />
        </a>
        <a class="navbar-brand notranslate site-link" href="/" target="_self" rel="noopener noreferrer"> chat.vote </a>

        <div class="collapse navbar-collapse">
          <ul class="navbar-nav">
            <li class="nav-item">
              <a
                class="nav-link active site-link"
                data-bs-toggle="tooltip"
                data-bs-delay="200"
                data-bs-placement="bottom"
                data-bs-title="Polls that you vote on by typing in Twitch chat"
                aria-current="page"
                target="_self"
                rel="noopener noreferrer"
                href="/"
              >
                <img style="height: 1.2em; filter: invert(0.25)" id="twitchLogo" alt="twitch" src="/pics/twitch.png" /> Twitch chat polls
              </a>
            </li>
            <li class="nav-item">
              <a
                class="nav-link site-link"
                data-bs-toggle="tooltip"
                data-bs-delay="200"
                data-bs-placement="bottom"
                data-bs-title="Straw polls with shareable links"
                target="_self"
                rel="noopener noreferrer"
                href="/poll/"
              >
                <i class="material-icons notranslate">how_to_vote</i>Polls
              </a>
            </li>
            <li class="nav-item">
              <a
                class="nav-link site-link"
                data-bs-toggle="tooltip"
                data-bs-delay="200"
                data-bs-placement="bottom"
                data-bs-title="Mini games with chat interaction"
                target="_self"
                rel="noopener noreferrer"
                href="/games/"
              >
                <i class="material-icons notranslate">videogame_asset</i> Games
              </a>
            </li>
            <li class="nav-item">
              <a
                class="nav-link site-link"
                data-bs-toggle="tooltip"
                data-bs-delay="200"
                data-bs-placement="bottom"
                data-bs-title="Twitch chat raffles"
                target="_self"
                rel="noopener noreferrer"
                href="/raffles/"
              >
                <i class="material-icons notranslate">local_activity</i> Raffles
              </a>
            </li>
            <li class="nav-item">
              <a
                class="nav-link site-link"
                data-bs-toggle="tooltip"
                data-bs-delay="200"
                data-bs-placement="bottom"
                data-bs-title="Brackets and tier lists with chat interaction"
                target="_self"
                rel="noopener noreferrer"
                href="/brackets/"
              >
                <i class="material-icons notranslate">emoji_events</i> Brackets
              </a>
            </li>
            <li class="nav-item" id="vtsLink" style="display: none">
              <a
                class="nav-link site-link"
                data-bs-toggle="tooltip"
                data-bs-delay="200"
                data-bs-placement="bottom"
                data-bs-title="A VTS plugin that allows your viewers to control your model (recommended based on your stream tags)"
                target="_self"
                rel="noopener noreferrer"
                href="/vts/"
              >
                <span class="vts-icon"></span>VTube Studio Plugin
              </a>
            </li>
          </ul>
          <div class="mx-auto d-inline-flex">
            <div id="status" style="margin-top: 5px">
              <h4><span class="badge bg-danger">Not connected :(</span></h4>
            </div>
          </div>
        </div>
        <div id="topRight" class="navbar-nav">
          <div class="btn-group" role="group" aria-label="login options">
            <a
              role="button"
              id="loginButton"
              onclick="login()"
              class="btn btn-twitch"
              tabindex="0"
              data-bs-container="body"
              data-bs-custom-class="custom-popover"
              data-bs-placement="bottom"
              data-bs-trigger="manual"
              data-bs-toggle="popover"
              data-bs-title="Not signed in"
              data-bs-content="You need sign in first before adding options or enabling voting/suggestions"
              ><span class="twitch-icon"></span>Sign in with Twitch
            </a>
            <div class="btn-group" role="group">
              <button
                id="btnGroupDropLogin"
                type="button"
                class="btn btn-twitch dropdown-toggle"
                data-bs-toggle="dropdown"
                data-bs-auto-close="outside"
                aria-label="other login option, connect manually"
                aria-expanded="false"
              ></button>
              <div class="dropdown-menu dropdown-menu-end" aria-labelledby="btnGroupDropLogin">
                <div class="p-3" style="width: 300px">
                  <label for="channelName" class="form-label">Connect to chat directly</label>
                  <div class="input-group mb-3">
                    <span class="input-group-text" id="directLoginChannel">twitch.tv/</span>
                    <input type="text" class="form-control" id="channelName" aria-describedby="directLoginChannel" />
                  </div>
                  <small class="text-body-secondary">Some features will not be available if you connect directly</small><br />
                  <button type="button" onclick="connect()" class="btn btn-primary float-end">Connect</button>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="navbar-nav">
          <div id="theme-label-container">
            <label id="theme-label">
              <input id="darkTheme" type="checkbox" checked />
              <div class="planet"></div>
              <div class="theme-elements">
                <svg version="1.1" viewBox="0 0 500 500" xmlns="http://www.w3.org/2000/svg">
                  <circle cx="250" cy="250" r="200" />
                </svg>
                <svg version="1.1" viewBox="0 0 500 500" xmlns="http://www.w3.org/2000/svg">
                  <circle cx="250" cy="250" r="200" />
                </svg>
                <svg version="1.1" viewBox="0 0 500 500" xmlns="http://www.w3.org/2000/svg">
                  <circle cx="250" cy="250" r="200" />
                </svg>
                <svg version="1.1" viewBox="0 0 500 500" xmlns="http://www.w3.org/2000/svg">
                  <circle cx="250" cy="250" r="200" />
                </svg>
                <svg version="1.1" viewBox="0 0 500 500" xmlns="http://www.w3.org/2000/svg">
                  <circle cx="250" cy="250" r="200" />
                </svg>
                <svg version="1.1" viewBox="0 0 500 500" xmlns="http://www.w3.org/2000/svg">
                  <circle cx="250" cy="250" r="200" />
                </svg>
                <svg version="1.1" viewBox="0 0 500 500" xmlns="http://www.w3.org/2000/svg">
                  <circle cx="250" cy="250" r="200" />
                </svg>
                <svg version="1.1" viewBox="0 0 500 500" xmlns="http://www.w3.org/2000/svg">
                  <circle cx="250" cy="250" r="200" />
                </svg>
              </div>
            </label>
          </div>
        </div>
      </div>
    </nav>

    <div class="container-fluid">
      <div class="row">
        <div class="col-xxl-2">
          <div aria-live="polite" aria-atomic="true" class="position-relative">
            <div id="toastContainer" class="toast-container"></div>
          </div>
        </div>

        <div class="col-xxl-8">
          <div id="questionDiv" class="mb-2 mt-2">
            <div class="card bg-dark-subtle border-dark-subtle">
              <div id="questionCard" class="card-body">
                <i id="hideQuestion" class="material-icons notranslate">arrow_drop_up</i>
                <label contenteditable="true" spellcheck="false" id="questionLabel" class="pull-left" data-placeholder="Type your question here"></label>
              </div>
            </div>
          </div>

          <div class="card bg-dark-subtle border-dark-subtle mb-2 mt-2" id="enterPollOptionCard">
            <div class="card-body" id="enterPollOptionCardBody">
              <span
                data-bs-custom-class="custom-popover"
                id="pollOptionSpan"
                data-bs-container="body"
                tabindex="0"
                data-bs-toggle="popover"
                data-bs-trigger="manual"
                data-bs-placement="top"
                data-bs-title="No options added"
                data-bs-content="You need to add 2 or more options to the poll before starting."
              >
                <label for="pollOption" id="pollOptionLabel" class="form-label">Enter poll option:</label>
              </span>
              <div class="input-group mb-3">
                <input type="text" id="pollOption" class="form-control" placeholder="Poll option" aria-label="Poll option input text field" />
                <button
                  class="btn btn-outline-secondary"
                  type="button"
                  id="addOption"
                  onclick="addOption()"
                  data-bs-toggle="tooltip"
                  data-bs-delay="200"
                  data-bs-placement="top"
                  data-bs-title="or just press enter :)"
                >
                  Add
                </button>
              </div>
            </div>
          </div>

          <div class="alert alert-info alert-dismissible mb-2 mt-2" id="subOnlyAlert" role="alert" style="display: none">
            <i class="material-icons notranslate">attach_money</i> Subscribers only poll. Click on the subscribe button, you might have a free prime sub
            <img src="/pics/smile.png" alt="bot" style="height: 1.5em" />
            <button type="button" class="btn btn-twitch">
              <svg width="1.5em" height="1.5em" style="fill: white" version="1.1" viewBox="0 0 20 20" x="20px" y="20px">
                <path fill-rule="evenodd" clip-rule="evenodd" d="M18 5v8a2 2 0 0 1-2 2H4a2.002 2.002 0 0 1-2-2V5l4 3 4-4 4 4 4-3z"></path>
              </svg>
              Subscribe Free
            </button>
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
          </div>

          <div class="card border-danger text-center mb-2 mt-2" id="countdown" style="display: none">
            <div class="card-body">
              <div class="values d-inline-flex" style="font-size: 3em"></div>
              <div class="btn-group float-end h-100" role="group" aria-label="Timer controls" id="timerControls">
                <button class="btn btn-outline-secondary" type="button" id="stopTimer" onclick="stopTimer()">
                  <i class="material-icons notranslate">stop</i>
                </button>
                <button class="btn btn-outline-secondary" type="button" id="pauseTimer" onclick="pauseTimer()">
                  <i class="material-icons notranslate">pause</i>
                </button>
                <button class="btn btn-outline-secondary" type="button" style="display: none" id="unpauseTimer" onclick="unpauseTimer()">
                  <i class="material-icons notranslate">play_arrow</i>
                </button>
              </div>
            </div>
          </div>

          <div class="card bg-dark-subtle border-dark-subtle mb-2 mt-2" id="tableAndChartDiv">
            <div class="card-body">
              <ul class="nav nav-tabs" id="tableAndChart" role="tablist">
                <li class="nav-item" role="presentation">
                  <button class="nav-link active align-items-center d-flex gap-1" id="tableTabButton" data-bs-toggle="tab" data-bs-target="#tableTab" type="button" role="tab" aria-controls="tableTab" aria-selected="true">
                    <i class="material-icons notranslate">toc</i>Table view
                  </button>
                </li>
                <li class="nav-item" role="presentation">
                  <button class="nav-link align-items-center d-flex gap-1" id="chartTabButton" data-bs-toggle="tab" data-bs-target="#chartTab" type="button" role="tab" aria-controls="chartTab" aria-selected="false">
                    <i style="transform: rotateZ(90deg)" class="material-icons notranslate">stacked_bar_chart</i>Chart view
                  </button>
                </li>
                <li class="nav-item" role="presentation">
                  <button class="nav-link align-items-center d-flex gap-1" id="yesnoTabButton" data-bs-toggle="tab" data-bs-target="#yesnoTab" type="button" role="tab" aria-controls="yesnoTab" aria-selected="false">
                    <img src="/pics/yeanay.webp" alt="yeanay" style="height: 1.5em" />Mode
                  </button>
                </li>
              </ul>
              <div class="tab-content">
                <div class="tab-pane fade show active" id="tableTab" role="tabpanel" aria-labelledby="tableTabButton" tabindex="0">
                  <table id="options" class="table table-bordered" style="width: 100%">
                    <thead>
                      <tr>
                        <th>ID</th>
                        <th>Command</th>
                        <th>Option</th>
                        <th>by</th>
                        <th>Score</th>
                        <th>Delete</th>
                      </tr>
                    </thead>
                    <tbody></tbody>
                  </table>
                </div>
                <div class="tab-pane fade" id="chartTab" role="tabpanel" aria-labelledby="chartTabButton" tabindex="0">
                  <div class="container-fluid" id="chartContainer">
                    <div id="chartDiv" class="row">
                      <small id="voteHint" style="height: 0px" class="text-center"></small>
                      <canvas id="chartCanvas"></canvas>
                    </div>
                    <div class="row">
                      <div class="col">
                        <div class="btn-group" role="group" aria-label="chart type toggles">
                          <input class="btn-check" type="radio" name="charttype" id="barChart" autocomplete="off" checked />
                          <label class="btn btn-outline-info" for="barChart" data-bs-toggle="tooltip" data-bs-delay="200" data-bs-placement="top" data-bs-title="Bar chart">
                            <i style="transform: rotateZ(90deg)" class="material-icons notranslate">stacked_bar_chart</i>
                          </label>
                          <input class="btn-check" type="radio" name="charttype" id="pieChart" autocomplete="off" />
                          <label class="btn btn-outline-info" for="pieChart" data-bs-toggle="tooltip" data-bs-delay="200" data-bs-placement="top" data-bs-title="Pie chart"
                            ><i class="material-icons notranslate">pie_chart</i></label
                          >
                        </div>
                        <input type="checkbox" class="btn-check" id="sortChart" autocomplete="off" />
                        <label
                          class="btn btn-outline-success"
                          for="sortChart"
                          id="sortChartLabel"
                          data-bs-toggle="tooltip"
                          data-bs-delay="200"
                          data-bs-placement="top"
                          data-bs-title="Sort chart"
                          ><i class="material-icons notranslate">sort</i></label
                        >
                        <div class="totalVotesDiv">Total votes: <span id="totalVotes">0</span></div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="tab-pane fade" id="yesnoTab" role="tabpanel" aria-labelledby="yesnoTabButton" tabindex="0">
                  <div class="container-fluid text-center">
                    <div class="row">
                      <div class="col">
                        Type <img src="/pics/yea.webp" alt="yea" style="height: 24px; width: 24px" />|yes or <img src="/pics/nay.webp" alt="nay" style="height: 24px; width: 24px" />|no in
                        chat to vote
                      </div>
                    </div>
                    <div id="yesnoDiv" class="row align-items-center">
                      <div class="col">
                        <img id="yeaPic" src="/pics/yea.webp" alt="yea" style="height: 150px" />
                        <br /><span id="yeaCount">0 Votes (0%)</span>
                      </div>
                      <div class="col">
                        <img id="nayPic" src="/pics/nay.webp" alt="nay" style="height: 150px" />
                        <br /><span id="nayCount">0 Votes (0%)</span>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col">
                        <div class="totalVotesDiv">Total votes: <span id="yesnoTotalVotes">0</span></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="container-fluid p-0" id="hotbar">
            <div class="row">
              <div class="col-auto mt-1 ps-3">
                <div class="row">
                  <div class="col-lg-auto m-0 p-0">
                    <div class="btn-group">
                      <button
                        type="button"
                        id="enableVoting"
                        class="btn btn-success defaultbtn"
                        data-bs-container="body"
                        data-bs-trigger="manual"
                        data-bs-placement="bottom"
                        data-bs-toggle="popover"
                        data-bs-title="Voting disabled"
                        data-bs-content="A viewer is trying to vote but voting is disabled"
                      >
                        <span id="enableVotingText">Start Voting</span>
                      </button>
                      <button
                        type="button"
                        id="enableVotingDropdown"
                        class="btn btn-success defaultbtn dropdown-toggle dropdown-toggle-split"
                        data-bs-toggle="dropdown"
                        data-bs-auto-close="outside"
                        aria-expanded="false"
                      >
                        <span class="visually-hidden">Toggle Dropdown</span>
                      </button>
                      <div class="dropdown-menu dropdown-menu-end p-3" style="width: 400px; font-size: 0.9rem">
                        <h6>Voting mode</h6>

                        <div class="form-check mb-3">
                          <input class="form-check-input" type="radio" name="votingmode" id="voteWithNumbers" aria-describedby="voteWithNumbersdesc" checked />
                          <label class="form-check-label" for="voteWithNumbers">
                            Vote with numbers
                            <i
                              class="material-icons notranslate cursor-pointer"
                              data-bs-toggle="tooltip"
                              data-bs-delay="200"
                              data-bs-custom-class="wide-tooltip"
                              data-bs-placement="auto"
                              data-bs-html="true"
                              data-bs-title='<img src="/pics/m2.webp"/>'
                              >help</i
                            >
                          </label>
                          <small id="voteWithNumbersdesc" class="text-body-secondary"> <br />Viewers vote by typing the number of the option ("1", "2")</small>
                        </div>
                        <div class="form-check">
                          <input class="form-check-input" type="radio" name="votingmode" id="voteWithText" aria-describedby="voteWithTextdesc" />
                          <label class="form-check-label" for="voteWithText">
                            Vote with text
                            <i
                              class="material-icons notranslate cursor-pointer"
                              data-bs-toggle="tooltip"
                              data-bs-delay="200"
                              data-bs-custom-class="wide-tooltip"
                              data-bs-placement="auto"
                              data-bs-html="true"
                              data-bs-title='<img src="/pics/m3.webp"/>'
                              >help</i
                            >
                          </label>
                          <small id="voteWithTextdesc" class="text-body-secondary"> <br />Viewers vote by typing the option ("option1", "option2").</small>
                        </div>
                        <hr />

                        <div class="mb-3">
                          <label for="timerValueMinutes" class="form-label"><i class="material-icons notranslate">timer</i>Poll timer</label>
                          <div class="input-group mb-3">
                            <input type="number" min="0" value="0" class="form-control" id="timerValueMinutes" onchange="saveSettings()" aria-describedby="timerDesc" />
                            <span class="input-group-text" id="timerDesc">minutes</span>
                          </div>
                          <div class="form-text">Timer automatically starts when you start voting. Set to 0 to disable the timer</div>
                        </div>
                      </div>
                    </div>

                    <div class="btn-group">
                      <button
                        type="button"
                        id="enableSuggestions"
                        class="btn btn-success defaultbtn"
                        data-bs-container="body"
                        data-bs-trigger="manual"
                        data-bs-placement="bottom"
                        data-bs-toggle="popover"
                        data-bs-title="Viewer suggestions disabled"
                        data-bs-content="A viewer is trying to post a suggestion but viewer suggestions are disabled"
                      >
                        <span id="enableSuggestionsText">Enable viewer suggestions</span>
                        <br /><small id="suggestionsCommand" class="notranslate">!suggest</small>
                      </button>
                      <button
                        type="button"
                        id="enableSuggestionsDropdown"
                        class="btn btn-success defaultbtn dropdown-toggle dropdown-toggle-split"
                        data-bs-toggle="dropdown"
                        data-bs-auto-close="outside"
                        aria-expanded="false"
                      >
                        <span class="visually-hidden">Toggle Dropdown</span>
                      </button>
                      <div class="dropdown-menu dropdown-menu-end p-3" style="width: 300px">
                        <div class="input-group">
                          <span class="input-group-text">Per user suggestion limit</span>
                          <input
                            type="number"
                            id="suggestionLimitUser"
                            onchange="saveSettings()"
                            style="max-width: 5em"
                            class="form-control"
                            min="0"
                            value="1"
                            step="1"
                            aria-label="Text input with checkbox for user suggestion limit"
                          />
                        </div>
                        <small class="text-body-secondary">How many suggestions each viewer can send. 0=unlimited</small>

                        <div class="input-group mt-3">
                          <span class="input-group-text">Total suggestion limit</span>
                          <input
                            type="number"
                            id="suggestionLimit"
                            style="max-width: 5em"
                            class="form-control"
                            min="0"
                            value="0"
                            step="1"
                            aria-label="Text input with checkbox for total suggestion limit"
                          />
                        </div>
                        <small class="text-body-secondary">The total amount of suggestions from all viewers. 0=unlimited</small>
                        <hr />
                        The suggestion command can be changed
                        <span onclick="changeSuggestionCommand()" style="color: #00bc8c; cursor: pointer">here</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="col-xl col-md-12 order-3 order-xl-2 mb-2 mt-2">
                <div class="container-fluid mb-2 p-0" id="settings">
                  <div class="row">
                    <div class="col">
                      <div class="accordion" id="settingsAccordion">
                        <div class="accordion-item border-dark-subtle">
                          <h2 class="accordion-header" id="settingsAccordionHeader">
                            <button
                              class="accordion-button collapsed bg-dark-subtle"
                              type="button"
                              data-bs-toggle="collapse"
                              data-bs-target="#settingsCollapse"
                              aria-expanded="false"
                              aria-controls="settingsCollapse"
                            >
                              <i class="material-icons notranslate">settings</i>Settings
                            </button>
                          </h2>

                          <div
                            id="settingsCollapse"
                            class="accordion-collapse collapse bg-dark-subtle border-dark-subtle"
                            aria-labelledby="settingsAccordionHeader"
                            data-bs-parent="#settingsAccordion"
                          >
                            <div class="accordion-body">
                              <ul class="nav nav-tabs" id="settingstabs" role="tablist">
                                <li class="nav-item" role="presentation">
                                  <a class="nav-link active" id="basicTab" data-bs-toggle="tab" href="#basic" role="tab" aria-controls="basic" aria-selected="true">Basic Settings</a>
                                </li>
                                <li class="nav-item" role="presentation">
                                  <a class="nav-link" id="advancedTab" data-bs-toggle="tab" href="#advanced" role="tab" aria-controls="advanced" aria-selected="false">Advanced Settings</a>
                                </li>
                                <li class="nav-item" role="presentation">
                                  <a class="nav-link" id="contactTab" data-bs-toggle="tab" href="#contact" role="tab" aria-controls="contact" aria-selected="false">About/Contact</a>
                                </li>
                              </ul>

                              <div class="tab-content p-1">
                                <div class="tab-pane fade show active" id="basic" role="tabpanel" aria-labelledby="basicTab">
                                  <div class="row">
                                    <div class="col-auto">
                                      <div class="card border settingscard">
                                        <div class="card-body">
                                          <div id="removeContainer">
                                            <div class="input-group flex-nowrap restart" id="removeDiv">
                                              <label class="input-group-text text-light" for="remove">Keep top</label>
                                              <select id="remove" class="form-control" style="max-width: 4em">
                                                <option selected value="2">2</option>
                                                <option value="3">3</option>
                                                <option value="4">4</option>
                                                <option value="5">5</option>
                                                <option value="6">6</option>
                                                <option value="7">7</option>
                                                <option value="8">8</option>
                                                <option value="9">9</option>
                                                <option value="10">10</option>
                                              </select>
                                              <label class="input-group-text text-light" for="remove">options and</label>
                                              <button class="btn btn-secondary" type="button" onclick="removeAndRestart()">restart<i class="material-icons notranslate">refresh</i></button>
                                            </div>
                                          </div>
                                        </div>
                                      </div>
                                    </div>
                                    <div class="col-auto">
                                      <div class="card border settingscard">
                                        <div class="card-body">
                                          <div class="form-check form-switch mb-3">
                                            <input type="checkbox" class="form-check-input" id="multiChoice" aria-describedby="multiChoiceDesc" />
                                            <label class="form-check-label" for="multiChoice"><i class="material-icons notranslate">plus_one</i>Allow multiple choices</label><br />
                                            <small id="multiChoiceDesc" class="text-body-secondary">
                                              Viewers will be able to vote for multiple options at once.<br />
                                              <span id="multiChoiceExample">Example: <span class="notranslate">1 2 3</span></span>
                                            </small>
                                            <br />
                                            <small class="yesno-warning text-warning" style="display: none">
                                              Does not support <img src="/pics/yeanay.webp" alt="yeanay" style="height: 1.2em" />Mode
                                            </small>
                                          </div>
                                          <div class="form-check form-switch mb-3">
                                            <input type="checkbox" class="form-check-input" id="allowChange" onchange="saveSettings()" aria-describedby="allowChangeDesc" />
                                            <label class="form-check-label" for="allowChange"><i class="material-icons notranslate">swap_horiz</i>Allow vote changing</label><br />
                                            <small id="allowChangeDesc" class="text-body-secondary">
                                              Viewers will be able to change the option they selected by voting again. They can change their vote only once.</small
                                            ><br />
                                            <small class="yesno-warning text-warning" style="display: none">
                                              Does not support <img src="/pics/yeanay.webp" alt="yeanay" style="height: 1.2em" />Mode
                                            </small>
                                          </div>
                                          <div class="form-check form-switch">
                                            <input type="checkbox" class="form-check-input" id="subMode" aria-describedby="submodedesc" />
                                            <label class="form-check-label" for="subMode"><i class="material-icons notranslate">attach_money</i>Subscribers only poll</label>
                                            <small id="submodedesc" class="text-body-secondary"
                                              ><br />Viewers that are not subscribed to your channel will not be able to vote or make suggestions.
                                            </small>
                                          </div>
                                        </div>
                                      </div>
                                    </div>
                                    <div class="col-auto">
                                      <div class="card border settingscard">
                                        <div class="card-body">
                                          <div class="form-group">
                                            <label for="suggestionPrefix" class="form-label"> Suggestion command</label>
                                            <input type="text" class="form-control notranslate" id="suggestionPrefix" value="!suggest" aria-describedby="description3" />
                                            <small id="description3" class="text-body-secondary"
                                              >The command to put before a suggestion. <br />Example: <span class="notranslate">!suggest my summer car</span></small
                                            >
                                          </div>
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </div>

                                <div class="tab-pane fade" id="advanced" role="tabpanel" aria-labelledby="advancedTab">
                                  <div class="row">
                                    <div class="col-auto">
                                      <div class="card border settingscard">
                                        <div class="card-body">
                                          <div class="form-check form-switch mb-3">
                                            <input type="checkbox" class="form-check-input" id="showChat" aria-describedby="showChatDesc" />
                                            <label class="form-check-label" id="showChatDesc" for="showChat">
                                              <img style="height: 1.2em; filter: invert(0.6)" id="twitchLogo2" alt="twitch" src="/pics/twitch.png" /> Show chat
                                            </label>
                                            <br /><small class="text-body-secondary">Shows your Twitch chat on the right side</small>
                                          </div>

                                          <div class="form-check form-switch mb-3">
                                            <input class="form-check-input" type="checkbox" id="refreshWarningEnabled" onchange="saveSettings()" />
                                            <label class="form-check-label" for="refreshWarningEnabled"
                                              ><i class="material-icons notranslate">notification_important</i>Enable close/refresh warning</label
                                            >
                                            <br /><small class="text-body-secondary"
                                              >Shows a warning before leaving/refreshing the site so that you don't accidentally lose your poll results.</small
                                            >
                                          </div>

                                          <div class="form-check form-switch mb-3">
                                            <input class="form-check-input" type="checkbox" id="linkPreviewThumbnailsEnabled" />
                                            <label class="form-check-label" for="linkPreviewThumbnailsEnabled">
                                              <i class="material-icons notranslate">preview</i>Show thumbnails in link preview
                                            </label>
                                            <br /><small class="text-body-secondary"><b class="text-danger">Use with caution; viewers might link images that break Twitch's TOS.</b></small>
                                          </div>

                                          <div class="input-group">
                                            <span class="input-group-text"><i class="material-icons notranslate">celebration</i>Confetti</span>
                                            <select class="form-select" id="confettiLevel" style="max-width: 7em">
                                              <option value="0" selected>Off</option>
                                              <option value="1">Low</option>
                                              <option value="2">Medium</option>
                                              <option value="3">High</option>
                                              <option value="4">INSANE ZULOL</option>
                                            </select>
                                            <small class="text-body-secondary">Confetti triggers when the timer runs out or when you pick a random option.</small>
                                          </div>
                                        </div>
                                      </div>

                                      <div class="card border settingscard">
                                        <div class="card-body">
                                          <div class="input-group mb-0">
                                            <span class="input-group-text blueborder">Refresh 3rd party emotes</span>
                                            <button class="btn btn-outline-info" type="button" onclick="getEmotes()"><i class="material-icons notranslate">refresh</i></button>
                                          </div>
                                          <div class="text-body-secondary mb-3">
                                            Loaded emotes (global/channel): BTTV: <span id="bttvGlobalEmotes">0</span>/<span id="bttvChannelEmotes">0</span> | FFZ:
                                            <span id="ffzGlobalEmotes">0</span>/<span id="ffzChannelEmotes">0</span> | 7TV: <span id="seventvGlobalEmotes">0</span>/<span
                                              id="seventvChannelEmotes"
                                              >0</span
                                            >
                                          </div>

                                          <div class="input-group mb-0">
                                            <span class="input-group-text redborder"><i class="material-icons notranslate">restore</i>Restore default settings</span>
                                            <button class="btn btn-outline-danger" type="button" data-bs-toggle="modal" data-bs-target="#resetSettingsModal">
                                              <i class="material-icons notranslate">delete_forever</i>Reset settings
                                            </button>
                                          </div>
                                          <small class="text-body-secondary">Resets all settings and reloads the page.</small>
                                        </div>
                                      </div>
                                    </div>

                                    <div class="col-auto">
                                      <div class="card border settingscard">
                                        <div class="card-body">
                                          <h5 class="card-title">Export Data</h5>
                                          <label>Data to be Exported:</label>
                                          <div class="form-group mb-3">
                                            <div class="form-check form-check-inline">
                                              <input class="form-check-input" type="radio" name="inlineRadioOptions" id="voters_selected" value="List of Voters" checked />
                                              <label class="form-check-label" for="voters_selected">List of Voters</label>
                                            </div>
                                            <div class="form-check form-check-inline">
                                              <input class="form-check-input" type="radio" name="inlineRadioOptions" id="options_selected" value="Poll Options" />
                                              <label class="form-check-label" for="options_selected">Poll Options</label>
                                            </div>
                                          </div>
                                          <label>File Format:</label>
                                          <div class="form-group mb-3">
                                            <div class="form-check form-check-inline">
                                              <input class="form-check-input" type="radio" name="inlineRadioOptions2" id="json_selected" value="JSON" checked />
                                              <label class="form-check-label" for="json_selected">JSON</label>
                                            </div>
                                            <div class="form-check form-check-inline">
                                              <input class="form-check-input" type="radio" name="inlineRadioOptions2" id="txt_selected" value="TXT" />
                                              <label class="form-check-label" for="txt_selected">TXT</label>
                                            </div>
                                          </div>

                                          <button type="button" onclick="download()" class="btn btn-primary"><i class="material-icons notranslate">file_download</i>Download</button>
                                        </div>
                                      </div>
                                    </div>

                                    <div class="col-12">
                                      <div class="card border settingscard">
                                        <div class="card-body">
                                          <label for="optionList">Add poll options in bulk</label>
                                          <textarea class="form-control" placeholder="1 option per line" id="optionList" style="white-space: pre-wrap" rows="7"></textarea>
                                          <button type="button" data-bs-toggle="collapse" data-bs-target="#settingsCollapse" onclick="addOptionBulk()" class="btn btn-primary mt-1">
                                            <i class="material-icons notranslate">add</i>Add
                                          </button>
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                                <div class="tab-pane fade" id="contact" role="tabpanel" aria-labelledby="contactTab">
                                  <div class="row">
                                    <div class="col-lg-6">
                                      <div class="card border settingscard">
                                        <div class="card-body">
                                          <h5>Other stuff by me :)</h5>
                                          <p>
                                            <a target="_blank" rel="noopener noreferrer" href="https://chat.vote/poll/">chat.vote/poll</a><br />
                                            <small>Like normal chat.vote but you vote by visiting the site instead of typing in chat.</small><br />
                                            <a target="_blank" rel="noopener noreferrer" href="https://chat.vote/games/">chat.vote/games</a><br />
                                            <small>Mini games with chat interaction.</small><br />
                                            <a target="_blank" rel="noopener noreferrer" href="https://chat.vote/vts/">chat.vote/vts</a><br />
                                            <small>A site that lets viewers control your VTube Studio model using chat commands/channel points/bits/subs</small><br />
                                            <a target="_blank" rel="noopener noreferrer" href="https://okayeg.com">OkayegBOT</a><br />
                                            <small>Fun/utility Twitch chat bot.</small><br />
                                            <a target="_blank" rel="noopener noreferrer" href="https://zero.chat.vote">0weebs</a><br />
                                            <small>Twitch moderation bot that bans weebs.</small><br />
                                          </p>
                                        </div>
                                      </div>
                                    </div>
                                    <div class="col-lg-6">
                                      <div class="card border settingscard">
                                        <div class="card-body">
                                          <h5>Contact info:</h5>
                                          <p>
                                            Site by <a target="_blank" rel="noopener noreferrer" href="https://www.twitch.tv/badoge">badoge</a> :) <br />If you find any issues or if you have
                                            suggestions or questions, you can contact me: <br /><a
                                              target="_blank"
                                              rel="noopener noreferrer"
                                              href="https://www.twitch.tv/popout/badoge/chat?popout="
                                              >in this chat</a
                                            >
                                            <br />or on <a target="_blank" rel="noopener noreferrer" href="https://discord.gg/eF54kvd">discord</a> <br />or by
                                            <a href="mailto:contact@chat.vote">email</a>
                                          </p>
                                        </div>
                                      </div>
                                    </div>
                                    <div class="col-auto">
                                      <div class="card border settingscard">
                                        <div class="card-body">
                                          <h5>About:</h5>
                                          <h6>This site uses:</h6>
                                          <ul>
                                            <li><a target="_blank" rel="noopener noreferrer" href="https://getbootstrap.com/">Bootstrap</a></li>
                                            <li><a target="_blank" rel="noopener noreferrer" href="https://tmijs.com/">tmi.js</a> to read twitch chat</li>
                                            <li><a target="_blank" rel="noopener noreferrer" href="https://datatables.net/">DataTables</a> the main table that shows the poll options</li>
                                            <li><a target="_blank" rel="noopener noreferrer" href="https://www.chartjs.org/">Chart.js</a> to display the results graph</li>
                                            <li>
                                              <a target="_blank" rel="noopener noreferrer" href="https://github.com/albert-gonzalez/easytimer.js">EasyTimer.js</a> for the countdown timer
                                            </li>
                                            <li><a target="_blank" rel="noopener noreferrer" href="https://linkify.js.org/">Linkify</a> to make suggested links clickable</li>
                                            <li><a target="_blank" rel="noopener noreferrer" href="https://wiki.chatterino.com/Link%20Previews/">Chatterino API</a> to get link previews</li>
                                            <li><a target="_blank" rel="noopener noreferrer" href="https://github.com/validatorjs/validator.js">validator.js</a> sanitizer</li>
                                            <li><a target="_blank" rel="noopener noreferrer" href="https://github.com/cure53/DOMPurify">DOMPurify</a> sanitizer</li>
                                            <li>
                                              <a target="_blank" rel="noopener noreferrer" title="dead link, idk what happened to the repo" href="https://github.com/mathusummut/confetti.js"
                                                >confetti.js</a
                                              >
                                              confetti :)
                                            </li>
                                            <li><a target="_blank" rel="noopener noreferrer" href="https://fonts.google.com/icons">Material Icons</a> icons</li>
                                            <li>Theme switcher by <a target="_blank" rel="noopener noreferrer" href="https://codepen.io/antlio/pen/LYVVXLJ">antlio</a></li>
                                            <li>
                                              Random Yea/Nay picker animation by <a target="_blank" rel="noopener noreferrer" href="https://codepen.io/seligmar/pen/RwPNQOd">seligmar</a>
                                            </li>
                                          </ul>
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="col-auto order-2 order-xl-3 mb-2 mt-2">
                <div class="btn-group-vertical" role="group" aria-label="Quick actions">
                  <div class="btn-group" role="group" aria-label="Delete all and restart buttons" style="margin-bottom: 1px">
                    <button
                      type="button"
                      class="btn btn-outline-warning"
                      id="restartPoll"
                      onclick="restartPoll()"
                      data-bs-toggle="tooltip"
                      data-bs-delay="200"
                      data-bs-placement="left"
                      data-bs-title="Restart the poll with the same options"
                      style="margin-right: 1px"
                    >
                      <i class="material-icons notranslate">refresh</i>
                    </button>
                    <button
                      type="button"
                      class="btn btn-outline-danger"
                      id="deleteAll"
                      data-bs-toggle="tooltip"
                      data-bs-delay="200"
                      data-bs-placement="right"
                      data-bs-title="Remove all options from the poll"
                    >
                      <i class="material-icons notranslate">delete_forever</i>
                    </button>
                  </div>
                  <div class="btn-group" role="group" aria-label="Hide scores and random option buttons">
                    <button
                      type="button"
                      id="hideScore"
                      class="btn btn-outline-primary"
                      data-bs-toggle="tooltip"
                      data-bs-delay="200"
                      data-bs-placement="left"
                      data-bs-title="Hide score"
                      style="margin-right: 1px"
                    >
                      <i class="material-icons notranslate" id="hideScoreIcon">visibility</i>
                    </button>
                    <button
                      type="button"
                      id="pickRandom"
                      class="btn btn-outline-info"
                      data-bs-toggle="tooltip"
                      data-bs-delay="200"
                      data-bs-placement="right"
                      data-bs-title="Pick a random option"
                    >
                      <i class="material-icons notranslate">casino</i>
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="col-xxl-2 p-0 m-0">
          <div id="chat"></div>
        </div>
      </div>
    </div>

    <script src="/js/tmi.min.js"></script>
    <script src="/js/jquery.min.js"></script>
    <script src="/js/chart.umd.js"></script>
    <script src="/js/purify.min.js"></script>
    <script src="/js/easytimer.min.js"></script>
    <script src="/js/validator.min.js"></script>
    <script src="/js/linkify.min.js"></script>
    <script src="/js/linkify-element.min.js"></script>
    <script src="/js/linkify-plugin-mention.min.js"></script>
    <script src="/js/confetti.min.js"></script>
    <script src="/js/bootstrap.bundle.min.js"></script>
    <script src="/js/datatables.min.js"></script>
    <script src="/js/functions.min.js"></script>
    <script src="/js/chatvote.min.js"></script>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-H43YN7FSSP"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "G-H43YN7FSSP");
    </script>
  </body>
</html>
