class AttackProjectile{constructor(t,e,s){this.source=t,this.owner=e,this.x=s.x||e.object.x+.5*e.object.displayWidth-e.object.displayWidth*e.object.flipX,this.y=s.y||e.object.y,this.damage=e.damage,this.icon=s.weaponIcon,this.collideBehavior=s.collideBehavior,this.soundOfDamage=s.soundOfDamage,this.nullUnit={dead:!0,takeDamage:Phaser.Utils.NOOP,takeHeal:Phaser.Utils.NOOP},this.object=t.physics.add.sprite(this.x,this.y,s.type),arena.groups.projectiles.add(this.object),this.object.ownerUnit=this.owner,this.object.body.setAllowGravity(s.gravitate),this.object.setScale((s.scale||1)*arena.internals.globalScale).setFlipX(e.object.flipX).setVelocityX(2*-e.object.flipX*s.speedX+s.speedX).setVelocityY(s.speedY),s.lifecycle.apply(this);const i=(t,e)=>e.hasOwnProperty("ownerUnit")&&t.ownerUnit.guid!==e.ownerUnit.guid,a=(t,e)=>{e.ownerUnit.takeDamage(this.owner,this,!e.ownerUnit.dead*this.damage),this.collideBehavior.apply(this)};s.persistent||t.physics.add.collider(this.object,arena.groups.platforms,(function(t){t.destroy()}),null,this),s.hitscans.forEach((s=>{t.physics.add[s](this.object,e.enemies,a,i,this)})),s.sound.play({volume:arena.settings.soundVolume*t.sound.getCustomExponent(),mute:!arena.settings.sound}),this.object.play("anim-"+s.type)}}class ArenaUnit{constructor(t,e,s=0,i=0,a="",n=null,o=""){this.source=t,this.guid=Phaser.Utils.String.UUID(),this.type=e,this.class=e,this.master={},this.summons=new Set,this.x=s,this.y=i,this.attack={weaponIcon:"",speedX:0,speedY:0,gravitate:!1,persistent:!0,type:"hit-melee",hitscans:["collider","overlap"],collideBehavior:Phaser.Utils.NOOP,sound:t.sound.get(this.class+"-attack"),soundOfDamage:t.sound.get(this.class+"-hit"),lifecycle:function(){this.object.on("animationcomplete",(()=>{this.object.destroy()}))}},this.ability={isEmpty:!0,cooldown:1e3,lastUsed:0,availableAt:0,action:Phaser.Utils.NOOP},arena.internals.isTeamMode?(this.team=arena.internals.validTeams.includes(o)?o:arena.teams.red.units.size>arena.teams.blue.units.size?"blue":"red",this.group="units_"+this.team,this.enemies=arena.groups["units_"+arena.internals.validTeams[Math.abs(arena.internals.validTeams.indexOf(this.team)-1)]],arena.teams[this.team].units.add(this),arena.teams[this.team].alive.add(this.guid)):(this.team="",this.group="units",this.enemies=arena.groups.units,arena.units.add(this),arena.internals.aliveReporter.add(this.guid)),this.source=t,this.object=t.physics.add.image(s,i,e),arena.groups[this.group].add(this.object),this.object.ownerUnit=this,this.object.setName(this.guid).setScale(.4*arena.internals.globalScale).setOrigin(.5,.5).setBounce(.2).setFrictionX(1).setCollideWorldBounds(!0),t.physics.add.collider(this.object,arena.groups.platforms,(()=>{this.canJump=!0}),null,this),this.bot={nextAttack:Number.MAX_SAFE_INTEGER,nextJump:Number.MAX_SAFE_INTEGER,nextAbility:Number.MAX_SAFE_INTEGER,nextChangeDirection:Number.MAX_SAFE_INTEGER},this.stats={lastKilledBy:null,ability:0,dead:0,damage:0,tank:0,restored:0,heal:0,frag:0},this.dead=!1,this.invulnerable=!1,this.immmovable=!1,this.disarmed=!1,this.canAttack=!0,this.canJump=!1,this.attackDelay=500,this.setName(a,n).setDamage().setMaxHP().setSpeed().setProjectileSpeed().setJumpSpeed(650).setFrozen("started"!==arena.state),this.healthbar=t.add.rectangle(this.object.x,this.object.y+.3*this.object.height,0,4,65280),this.healthbar.setStrokeStyle(1,"black"),this.arrowPointer={setVisible:Phaser.Utils.NOOP,setPosition:Phaser.Utils.NOOP,destroy:Phaser.Utils.NOOP},this.overheadText=arena.params.showUnitNames?t.add.text(this.object.x,this.object.y-.25*this.object.height,this.name,{font:"12px Arial",color:this.color}).setOrigin(.5,.5).setStroke("black",1):{setText:Phaser.Utils.NOOP,setColor:Phaser.Utils.NOOP,setPosition:Phaser.Utils.NOOP,destroy:Phaser.Utils.NOOP},this.timers={}}expose(){return{name:this.name,color:this.color,team:this.team,class:this.class,weapon:this.attack.weaponIcon,stats:this.stats}}setName(t,e,s=!0){if(arena.internals.isTeamMode)switch(this.team){case"red":this.color="#ff7777";break;case"blue":this.color="#66ccff";break}else this.color=e||"#"+Math.floor(6710886+10066329*Math.random()).toString(16);return s&&t?(this.name&&arena.unitStats.delete(this.name),this.name=t,arena.unitStats.set(this.name,this.expose())):this.name=t||"",this.overheadText&&(this.overheadText.setText(this.name),this.overheadText.setColor(this.color)),this}setDamage(t=25){return this.damage=t,this}setSpeed(t=256){return this.speed=t*arena.params.width/1280,this.object.body.setMaxVelocityX(t),this}setJumpSpeed(t=512){return this.jumpSpeed=t*arena.params.height/720,this}setAttackSpeed(t=2){return this.attackDelay=1e3/t,this}setProjectileSpeed(t=0){return this.attack.speedX=t*arena.params.width/1280,this}setMaxHP(t=100){return this.hasOwnProperty("maxHP")||(this.maxHP=t),this.hasOwnProperty("hp")?this.hp=Math.max(0,Math.min(t,t*this.hp/this.maxHP)):this.hp=t,this.maxHP=t,this}setPassive(){return this.bot.isPassive=!0,this}setControllable(){switch(arena.player=this.setPassive(),this.isPlayer=!0,this.class){case"hunter":arena.ui.abilityIcon.setTexture("icon-grenade");break;case"mage":arena.ui.abilityIcon.setTexture("icon-meteor");break;case"rogue":arena.ui.abilityIcon.setTexture("icon-blink");break;case"paladin":arena.ui.abilityIcon.setTexture("icon-repel");break;case"priest":arena.ui.abilityIcon.setTexture("icon-heal");break;case"shaman":arena.ui.abilityIcon.setTexture("icon-summon");break}return this.arrowPointer=this.source.add.text(this.object.x,this.object.y-.5*this.object.height,"▼",{fontSize:"32px",fill:"#fcf",boundsAlignH:"center",boundsAlignV:"middle"}),this.arrowPointer.setShadow(0,0,"#000",4),this.setSpeed(this.speed),this.object.setCollideWorldBounds(!0),this.object.setBounce(.1),this}setFrozen(t){return this.immovable=!!t,this.invulnerable=!!t,this.disarmed=!!t,this}defineAbility(t,e){this.ability.isEmpty=!1,this.ability.cooldown=t,this.ability.action=e}drawFrame(){if(this.dead)this.arrowPointer.setVisible(!1),this.object.scale>0?this.object.setScale(Math.max(0,this.object.scale-.005)):this.destroy();else{this.arrowPointer.setPosition(this.object.x-this.arrowPointer.width/2,this.object.y-2*this.object.displayHeight),this.overheadText.setPosition(this.object.x,this.object.y-.8*this.object.displayHeight);let t=this.hp/this.maxHP;this.healthbar.setSize(.3*this.object.width*t,this.healthbar.height),this.healthbar.setPosition(this.object.x-this.healthbar.width/2,this.object.y+.75*this.object.displayHeight),this.healthbar.setFillStyle((arena.internals.HEALTHBAR_COLOR_FLAGS.RED&arena.internals.HEALTHBAR_COLOR_FLAGS.RED*Math.min(2-2*t,1))+(arena.internals.HEALTHBAR_COLOR_FLAGS.GREEN&arena.internals.HEALTHBAR_COLOR_FLAGS.GREEN*Math.min(1,2*t)))}}takeDamage(t,e,s=0){!this.invulnerable&&s&&(this.hp=Math.max(this.hp-s,0),this.stats.tank+=s,t.stats.damage+=s,this.object.setTint(16751001),this.object.setVelocityY(this.object.body.velocity.y-.4*this.jumpSpeed),e.soundOfDamage.play({volume:arena.settings.soundVolume*this.source.sound.getCustomExponent(),mute:!arena.settings.sound}),this.hp<=0?(t.stats.frag+=1,this.die(t,e)):(this.invulnerable=!0,this.timers.damageTint||(this.timers.damageTint=setTimeout((()=>{this.object.clearTint(),delete this.timers.damageTint,this.invulnerable=!1}),500))))}takeHeal(t,e,s=0){this.dead||(this.hp=Math.min(this.hp+s,this.maxHP),this.stats.restored+=s,t.stats.heal+=s,this.object.setTint(7864183),this.timers.healTint||(this.timers.healTint=setTimeout((()=>{this.object.clearTint(),delete this.timers.healTint}),500)))}doJump(t=this.jumpSpeed){!this.immovable&&this.canJump&&this.object.body.touching.down&&(this.canJump=!1,this.object.body.setVelocityY(-t))}doMove(t){this.immovable||(t&&this.object.setFlipX(t<0),this.object.body.setVelocityX(this.object.body.maxVelocity.x*Math.sign(t)))}doAttack(){this.dead||this.disarmed||!this.canAttack||(this.canAttack=!1,new AttackProjectile(this.source,this,this.attack),this.timers.attackDelay=this.source.time.addEvent({delay:this.attackDelay,callback:()=>{this.canAttack=!0}}))}doAbility(){if(this.dead||this.disarmed||this.ability.isEmpty)return;this.isPlayer&&arena.ui.abilityIcon.setTint(6908265);const t=Date.now();t<this.ability.availableAt||(this.ability.lastUsed=t,this.ability.availableAt=t+this.ability.cooldown,this.stats.ability+=1,this.ability.action())}initializeBot(t){this.bot.nextJump=t+4567*Math.random(),this.bot.nextAttack=t+1234+7890*Math.random(),this.bot.nextAbility=this.ability.isEmpty?Number.MAX_SAFE_INTEGER:t+4567+7890*Math.random(),this.bot.nextChangeDirection=1}processBotAction(t){if(!this.dead&&!this.bot.isPassive&&(this.bot.nextJump<t&&(this.bot.nextJump=t+3434*Math.random(),this.doJump()),this.bot.nextAttack<t&&(this.bot.nextAttack=t+this.attackDelay+this.attackDelay*(1+Math.random()),this.doAttack()),this.bot.nextAbility<t&&(this.bot.nextAbility=t+this.ability.cooldown+this.ability.cooldown*Math.random(),this.doAbility()),this.bot.nextChangeDirection<t)){this.bot.nextChangeDirection=t+2345*Math.random();let e=Math.random()-.5+(this.object.x/arena.params.width-.5);this.doMove(Math.sign(-e))}}die(t,e){if(arena.groups.units.remove(this.object),this.team&&arena.groups["units_"+this.team].remove(this.object),this.healthbar.destroy(),this.overheadText.destroy(),this.object.setTintFill(13487565),this.dead=!0,this.invulnerable=!0,this.immmovable=!0,this.stats.dead+=1,this.master.guid?(this.master.summons.delete(this),this.master.dead&&this.master.summons.size<1&&(arena.teams.blue.alive.delete(this.master.guid),arena.teams.red.alive.delete(this.master.guid),arena.internals.aliveReporter.delete(this.master.guid))):(this.stats.lastKilledBy=t.master.guid?t.master.expose():t.expose(),this.summons.size<1&&(arena.teams.blue.alive.delete(this.guid),arena.teams.red.alive.delete(this.guid),arena.internals.aliveReporter.delete(this.guid))),new ArenaKillFeedNotification(this.expose(),t?t.expose():null,e.icon).emitEvent(),arena.internals.isTeamMode)1===arena.teams.red.alive.size?this.source.events.emit("arena-last-red",this.name,this.class):0===arena.teams.red.alive.size&&this.source.events.emit("arena-finished",{name:"Blue team",color:"#6af",class:t.class}),1===arena.teams.blue.alive.size?this.source.events.emit("arena-last-blue",this.name,this.class):0===arena.teams.blue.alive.size&&this.source.events.emit("arena-finished",{name:"Red team",color:"#f66",class:t.class});else if(10===arena.internals.aliveReporter.size)this.source.events.emit("arena-top10");else if(2===arena.internals.aliveReporter.size)this.source.events.emit("arena-top2");else if(arena.internals.aliveReporter.size<2){let t=arena.internals.aliveReporter.values().next();if(t.done)return void arena.source.events.emit("arena-finished",this.expose());t=t.value;let e=arena.aux.findUnitByGuid(t);if(e)return void arena.source.events.emit("arena-finished",e.expose());for(const e of arena.summons)if(e.master.guid===t)return void arena.source.events.emit("arena-finished",e.master.expose());arena.source.events.emit("arena-finished",{name:"...?",color:"white",class:"dummy"})}}destroy(){this.summons.size||(arena.teams.blue.alive.delete(this.guid),arena.teams.red.alive.delete(this.guid),arena.internals.aliveReporter.delete(this.guid)),this.healthbar.destroy(),this.overheadText.destroy(),this.arrowPointer.destroy(),this.object.destroy(),arena.units.delete(this),arena.teams.red.units.delete(this),arena.teams.blue.units.delete(this),arena.summons.delete(this)}}class ArenaRogue extends ArenaUnit{constructor(t,e,s,i,a,n){super(t,"rogue",e,s,i,a,n),this.setMaxHP(110),this.setSpeed(220),this.setDamage(45),this.setAttackSpeed(1.8),this.attack.weaponIcon="🔪",this.defineAbility(5e3,(()=>{const e={x:this.object.x,y:this.object.y,weaponIcon:"",speedX:0,speedY:0,scale:1,gravitate:!1,sound:t.sound.get("blink"),type:"abil-blink",hitscans:[],collideBehavior:Phaser.Utils.NOOP,lifecycle:function(){this.object.on("animationcomplete",(()=>{this.object.destroy()}))}};new AttackProjectile(this.source,this,e),e.x=(.9*Math.random()+.05)*arena.params.width,e.y=(.75*Math.random()+.15)*arena.params.height,new AttackProjectile(this.source,this,e),this.object.setPosition(e.x,e.y)}))}}class ArenaHunter extends ArenaUnit{constructor(t,e,s,i,a,n){super(t,"hunter",e,s,i,a,n),this.setMaxHP(105),this.setSpeed(200),this.setDamage(35),this.setAttackSpeed(2),this.setProjectileSpeed(800),this.attack.weaponIcon="🎯",this.attack.persistent=!1,this.attack.type="hit-bullet",this.attack.collideBehavior=function(){this.object.destroy()},this.attack.lifecycle=function(){this.object.setCollideWorldBounds(!0),this.object.body.onWorldBounds=!0,this.object.body.world.on("worldbounds",(function(t){t.gameObject===this&&this.destroy()}),this.object)};let o=this;this.defineAbility(6e3,(()=>{new AttackProjectile(this.source,this,{x:this.object.x,y:this.object.y,weaponIcon:"",speedX:444*arena.params.width/1280,speedY:-420,scale:1,gravitate:!0,sound:t.sound.get("grenade"),type:"abil-grenade",hitscans:[],persistent:!0,collideBehavior:Phaser.Utils.NOOP,lifecycle:function(){this.object.body.setCollideWorldBounds(!0,1,1),this.source.physics.add.collider(this.object,arena.groups.platforms,((e,s)=>{this.object.destroy(),new AttackProjectile(o.source,o,{x:e.x,y:e.y,weaponIcon:"💣",speedX:0,speedY:0,scale:1,damage:60,gravitate:!1,persistent:!0,collideBehavior:Phaser.Utils.NOOP,sound:t.sound.get("grenade-explode"),soundOfDamage:{play:Phaser.Utils.NOOP},type:"explosion",hitscans:["overlap"],lifecycle:function(){this.object.on("animationcomplete",(()=>{this.object.destroy()}))}})}),null,this)}})}))}}class ArenaMage extends ArenaUnit{constructor(t,e,s,i,a,n){super(t,"mage",e,s,i,a,n),this.setMaxHP(100),this.setSpeed(140),this.setDamage(45),this.setAttackSpeed(1),this.setProjectileSpeed(300),this.attack.weaponIcon="🎇",this.attack.persistent=!1,this.attack.type="hit-fireball",this.attack.collideBehavior=function(){this.object.destroy()},this.attack.lifecycle=function(){this.object.setCollideWorldBounds(!0),this.object.body.onWorldBounds=!0,this.object.body.world.on("worldbounds",(function(t){t.gameObject===this&&this.destroy()}),this.object)},this.defineAbility(12e3,(()=>{new AttackProjectile(this.source,this,{x:(.1+.8*Math.random())*arena.params.width,y:-100,weaponIcon:"🌠",speedX:150+400*Math.random()-650*(Math.random()<.5),speedY:0,scale:1,damage:20,gravitate:!0,sound:t.sound.get("meteor"),soundOfDamage:{play:Phaser.Utils.NOOP},type:"meteor",hitscans:["overlap"],persistent:!0,collideBehavior:Phaser.Utils.NOOP,lifecycle:function(){this._particles=[],arena.particles.forEach(((t,e)=>{this._particles.push(t.createEmitter({gravityX:0,gravityY:0,speed:150,frequency:40+48*e,scale:{start:.4,end:1.3},lifespan:666,follow:this.object}))})),this.object.body.setCollideWorldBounds(!0,1,1),this.object.body.onWorldBounds=!0,this.object.body.world.on("worldbounds",(function(t){t.gameObject===this.object&&t.gameObject.setFlipX(t.velocity.x<0)}),this),this.source.physics.add.collider(this.object,arena.groups.platforms),this.object.setBounce(0),setTimeout((()=>{this._particles.forEach((t=>t.remove())),this.object.destroy()}),3333)}})}))}}class ArenaPaladin extends ArenaUnit{constructor(t,e,s,i,a,n){super(t,"paladin",e,s,i,a,n),this.setMaxHP(135),this.setSpeed(200),this.setDamage(55),this.setAttackSpeed(.7),this.attack.weaponIcon="⚔️",this.defineAbility(1e4,(()=>{this.invulnerable=!0,this.object.setTint(13421568),this.timers.invulTint||(this.timers.invulTint=setTimeout((()=>{this.object.clearTint(),delete this.timers.invulTint,this.invulnerable=!1}),2e3)),this.source.sound.play("repel",{volume:arena.settings.soundVolume*this.source.sound.getCustomExponent(),mute:!arena.settings.sound})}))}}class ArenaPriest extends ArenaUnit{constructor(t,e,s,i,a,n){super(t,"priest",e,s,i,a,n),this.setMaxHP(90),this.setSpeed(160),this.setDamage(25),this.setAttackSpeed(2.4),this.setProjectileSpeed(500),this.attack.weaponIcon="🏮",this.attack.persistent=!1,this.attack.type="hit-weakmagic",this.attack.collideBehavior=function(){this.object.destroy()},this.attack.lifecycle=function(){this.object.setCollideWorldBounds(!0),this.object.body.onWorldBounds=!0,this.object.body.world.on("worldbounds",(function(t){t.gameObject===this&&this.destroy()}),this.object)},this.defineAbility(1e4,(()=>{this.source.sound.play("heal",{volume:arena.settings.soundVolume*this.source.sound.getCustomExponent(),mute:!arena.settings.sound});if(arena.internals.isTeamMode)if(this.hp<this.maxHP)this.takeHeal(this,null,30);else for(const t of arena.teams[this.team].units)t.hp<t.maxHP&&t.takeHeal(this,null,30);this.takeHeal(this,null,30)}))}}class ArenaShaman extends ArenaUnit{constructor(t,e,s,i,a,n){super(t,"shaman",e,s,i,a,n),this.setMaxHP(165),this.setSpeed(200),this.setDamage(0),this.attack.weaponIcon="❓",this.canAttack=!1,this.defineAbility(7e3,(()=>{this.source.sound.play("unit-death",{volume:arena.settings.soundVolume*this.source.sound.getCustomExponent(),mute:!arena.settings.sound});let e=new ArenaUnit(this.source,"dummy",this.object.x,this.object.y,"","",this.team);e.master=this,arena.summons.add(e),this.summons.add(e),arena.units.delete(e),arena.teams.red.units.delete(e),arena.teams.blue.units.delete(e),arena.teams.red.alive.delete(e.guid),arena.teams.blue.alive.delete(e.guid),arena.internals.aliveReporter.delete(e.guid),e.object.setFlipX(this.object.flipX),e.attack.hitscans.length=0,e.attack.lifecycle=function(){t.physics.add.overlap(this.object,e.enemies,((t,e)=>{const s=e.ownerUnit||this.nullUnit;s.takeDamage(this.owner,this,!s.dead*this.damage)}),((t,e)=>t.ownerUnit.guid!==e.name&&t.ownerUnit.master.guid!==e.name&&t.ownerUnit.master.guid!==e.ownerUnit.master.guid),this),this.object.on("animationcomplete",(()=>{this.object.destroy()}))},e.attack.weaponIcon="🍴",e.setName(`Bog (${this.name})`,this.color,!1).setMaxHP(25).setSpeed(300).setDamage(30).setAttackSpeed(1.6).setFrozen(!1),e.stats=this.stats,e.initializeBot(1)}))}}function ArenaUnitFactory(t){return{mage:ArenaMage,hunter:ArenaHunter,rogue:ArenaRogue,paladin:ArenaPaladin,shaman:ArenaShaman,priest:ArenaPriest}[t]}class ArenaNotification{constructor(t,e,s=!1){this.dead=!1,this.startX=t||arena.params.width/2,this.startY=e||Math.max(32,arena.internals.notificationLastObject.active?arena.internals.notificationLastObject.y:arena.internals.notificationLastY),this.collisionClass=arena.internals.KILLFEED_COLLISION_MASKS.BIGTOAST,this.container=arena.source.add.container(this.startX,this.startY+24),s&&(arena.internal.notificationLastObject=this.container)}fillWithText(t,e){let s=arena.source.add.text(0,0,t,{font:"bold 60px Arial",fill:e,align:"center"});return s.setOrigin(.5,0),s.setShadow(0,0,"#000",16),this.container.add(s),this.container.setSize(s.width,s.height),this}show(t=-1){return arena.source.matter.add.gameObject(this.container,{position:{x:this.container.x,y:this.container.y},collisionFilter:{category:this.collisionClass}},!0),this.container.setCollidesWith([this.collisionClass,arena.internals.KILLFEED_COLLISION_MASKS.PADDER]),t?t>0&&(this.selfDestruct=setTimeout((()=>this.destroy()),t)):this.destroy(),this}destroy(){this.selfDestruct&&clearTimeout(this.selfDestruct),this.dead||(this.dead=!0,this.container.setCollisionCategory(arena.internals.KILLFEED_COLLISION_MASKS.DYING),this.isDying=setInterval((()=>{this.container.y>-100||(clearInterval(this.isDying),this.container.destroy())}),1e3))}}class ArenaKillFeedNotification extends ArenaNotification{constructor(t,e,s){if(super(arena.params.width-4,4+Math.max(32,arena.internals.killFeedLastObject.active?arena.internals.killFeedLastObject.y:arena.internals.killFeedLastY),!1),this.victim=t,this.originalKiller=e,this.icon=s,this.killer=e||{name:"",color:"black",class:"",weapon:""},!arena.params.killfeed)return;let i=arena.units.size+arena.teams.blue.units.size+arena.teams.red.units.size;if(e&&i>arena.params.killFeedHardLimit)return;this.dead=!1,this.collisionClass=arena.internals.KILLFEED_COLLISION_MASKS.TOAST,arena.internals.killFeedLastObject=this.container,this.container.add(arena.source.add.text(0,0,this.killer.name,{font:"bold 14px Arial",fill:this.killer.color,align:"right"})),this.container.add(arena.source.add.text(0,0,s||this.killer.weapon,{font:"14px",fill:"#ff0",align:"right"})),this.container.add(arena.source.add.text(0,0,t.name,{font:"bold 14px Arial",fill:t.color,align:"right"}));const a=this.container.getAll();let n=0;for(let t=a.length-1;t>=0;t--)n+=a[t].width+4,a[t].setOrigin(1,0),a[t].setShadow(0,0,"#000",4),a[t+1]&&a[t].setPosition(a[t+1].x-a[t+1].width-4*(a.length-t),a[t+1].y);this.container.setSize(n,a[0].height),this.show(arena.params.killFeedDuration+this.startY),arena.internals.killFeedLastObject=this.container}emitEvent(){return arena.source.events.emit("arena-unit-died",this.victim,this.originalKiller,this.icon),this}destroy(){arena.internals.killFeedLastY=arena.internals.killFeedLastObject.y,super.destroy()}}